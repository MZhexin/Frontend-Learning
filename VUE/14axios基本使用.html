<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>14axios基本使用</title>
</head>
<body>
    <!-- axios必须先导入再使用 -->
    <!-- 使用get或post方法即可发送对应的请求 -->
    <!-- 在then方法中的回调函数会在请求成功或失败时触发 -->
    <!-- 通过回调函数的形参，可以获取响应的内容或错误信息 -->

    <!-- 需要注意的是，在axios中，this指向的是axios对象，而不是window对象
         如果需要在回调函数中使用window对象，则需要使用bind方法绑定this
         或者新定义变量，比如 let that = this; that.xxx = response.data;
    -->

    <!-- axios可以被视为AJAX的封装库，可以这样理解：“axios是ajax，ajax不止axios”-->
    <!-- axios的更多内容可以参考文档：https://www.kancloud.cn/yunye/axios/234845  -->

    <input type="button" value="get请求" class="get">
    <input type="button" value="post请求" class="post">

    <script src="https://cdn.bootcdn.net/ajax/libs/axios/0.21.1/axios.min.js"></script>
    <script>
        // 语法（get请求和post请求）：
        // 1）axios.get(地址?key=value).then(function(response){回调成功时执行的函数}, function(error){回调失败时执行的函数})
        // 2) axios.post(地址,{key=value}).then(function(response){回调成功时执行的函数}, function(error){回调失败时执行的函数})

        // get请求
        // document.querySelector是匹配CSS选择器的元素的方法，如果找不到匹配元素则返回null
        document.querySelector('.get').onclick = function(){
            axios.get('https://autumnfish.cn/api/joke/list?num=3')      // 一个讲笑话的网站
            .then(function(response){
                console.log(response);      // 打印响应内容
            }, 
            function(error){
                console.log(error);         // 打印错误信息
            })
        }

        // post请求
        document.querySelector('.post').onclick = function(){
            axios.post('https://autumnfish.cn/api/user/reg',            // 一个具有用户注册功能的网站
            {username: "Jack"})
            .then(function(response){
                console.log(response);
            },
            function(error){
                console.log(error);
            })
        }
    </script>
</body>
</html>